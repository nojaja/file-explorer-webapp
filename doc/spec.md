# ファイルエクスプローラ Webアプリ仕様書 (spec.md)

## 概要
特定のフォルダ配下のファイルおよびフォルダをWeb UI上で一覧表示し、各種操作（ダウンロード・削除・フォルダ内移動）を行うWebアプリを実装する。

## 機能要件

### 1. 一覧表示
- 指定したルートフォルダ配下のファイル・フォルダを一覧表示する。
- ルートパスは環境変数で指定する。
- フォルダは先頭、ファイルは後に表示する。
- 各項目にアイコン（ファイル/フォルダ）を表示する。

### 2. ファイル操作
- ファイルの場合：
  - ダウンロードボタンを表示し、クリックでダウンロード可能にする。
  - 削除ボタンを表示し、クリックでファイルを完全削除できる。
- フォルダの場合：
  - 削除ボタンを表示し、クリックでフォルダごと完全削除できる（中身がある場合は警告）。
  - フォルダ名クリックでそのフォルダ配下の一覧に遷移する。
  - フォルダのダウンロード（zip化）も可能。メモリ節約のためstreamで処理する。

### 3. UI要件
- モダンでシンプルなUI（Material Design等を参考）
- 一覧はテーブルまたはリスト形式
- 操作ボタンは各行に配置
- 削除時は確認ダイアログを表示
- エラー時はエラーメッセージを表示

### 4. バックエンド要件
- Node.js (v18.20.7) でAPIサーバを実装
- APIで以下の機能を提供：
  - 指定パス配下のファイル・フォルダ一覧取得
  - ファイルダウンロード
  - フォルダダウンロード（zip化、stream対応）
  - ファイル/フォルダ完全削除
- ルートパスは環境変数で指定
- 認証認可機能を実装（github, gitlab OAUTH対応、推奨ライブラリを選定）

### 5. 技術要件
- Node.js (v18.20.7)
- ESM構文
- TypeScriptは使わない
- Webpackでバンドル
- UIはプレーンなHTML+JS
- API通信はfetchを利用
- 認証認可にはpassport.jsとpassport-github2, passport-gitlab2等のOAUTHライブラリを利用

### 6. フォルダ構成
- src/ : フロントエンド・バックエンド実装
- test/ : テストコード
- dist/ : バンドル成果物
- lib/ : ライブラリ
- doc/ : ドキュメント
- package.json, README.md, LICENSE

## 非機能要件
- 日本語UI
- ログは日本語
- エラー時は詳細なメッセージを表示
- Dockerコンテナとして稼働できるようにする（Dockerfileを用意し、環境変数で設定可能な設計とする）

## テスト
- JestでAPI・ロジックの単体テスト
- PlaywrightでUIのE2Eテスト

## 今後の拡張（任意）
- ファイルアップロード
- フォルダ作成
- ファイル名変更

